!function(a,b,c,d){"use strict";a.fn.sidebar=function(e){var f,g=a(this),h=a("head"),i=g.selector||"",j=(new Date).getTime(),k=[],l=arguments[0],m="string"==typeof l,n=[].slice.call(arguments,1),o=b.requestAnimationFrame||b.mozRequestAnimationFrame||b.webkitRequestAnimationFrame||b.msRequestAnimationFrame||function(a){setTimeout(a,0)};return g.each(function(){var b,g,p=a.isPlainObject(e)?a.extend(!0,{},a.fn.sidebar.settings,e):a.extend({},a.fn.sidebar.settings),q=p.selector,r=p.className,s=p.namespace,t=p.error,u="."+s,v="module-"+s,w=a(this),x=a(p.context),y=a("style[title="+s+"]"),z=x.children(q.sidebar),A=x.children(q.pusher),B=A.children(q.page),C=this,D=w.data(v);g={initialize:function(){g.debug("Initializing sidebar",w),b=g.get.transitionEvent(),g.setup.context(),o(g.setup.layout),g.instantiate()},instantiate:function(){g.verbose("Storing instance of module",g),D=g,w.data(v,g)},destroy:function(){g.verbose("Destroying previous module for",w),w.off(u).removeData(v)},event:{clickaway:function(b){0===w.find(b.target).size()&&0===a(b.target).filter(w).size()&&(g.verbose("User clicked on dimmed page"),g.hide())}},bind:{clickaway:function(){x.on("click"+u,g.event.clickaway).on("touchend"+u,g.event.clickaway)}},unbind:{clickaway:function(){x.off("click"+u).off("touchend"+u)}},refresh:function(){g.verbose("Refreshing selector cache"),x=a(p.context),y=a("style[title="+s+"]"),z=x.children(q.sidebar),A=x.children(q.pusher),B=A.children(q.page)},setup:{layout:function(){0===x.find(q.pusher).size()&&(g.debug("Adding wrapper element for sidebar"),A=a('<div class="pusher" />'),B=a('<div class="page" />'),A.append(B),x.children().not(q.omitted).not(z).wrapAll(A)),w.parent()[0]!==x[0]&&(g.debug("Moved sidebar to correct parent element"),w.detach().appendTo(x)),g.refresh()},context:function(){g.verbose("Adding pusshable class to wrapper"),x.addClass(r.pushable)}},attachEvents:function(b,c){var d=a(b);c=a.isFunction(g[c])?g[c]:g.toggle,d.size()>0?(g.debug("Attaching sidebar events to element",b,c),d.off(u).on("click"+u,c)):g.error(t.notFound)},show:function(b){b=a.isFunction(b)?b:function(){},g.debug("Showing sidebar",b),g.is.closed()?(p.overlay&&(p.animation="overlay"),"overlay"!==p.animation&&g.hideAll(),g.pushPage(function(){a.proxy(b,C)(),a.proxy(p.onShow,C)()}),a.proxy(p.onChange,C)(),a.proxy(p.onVisible,C)()):g.debug("Sidebar is already visible")},hide:function(b){b=a.isFunction(b)?b:function(){},g.debug("Hiding sidebar",b),g.is.visible()&&(g.pullPage(function(){a.proxy(b,C)(),a.proxy(p.onHidden,C)()}),a.proxy(p.onChange,C)(),a.proxy(p.onHide,C)())},hideAll:function(){var a=z.find("."+r.visible);a.sidebar("hide")},toggle:function(){g.verbose("Determining toggled direction"),g.is.closed()?g.show():g.hide()},pushPage:function(c){var d="overlay"==p.animation?w:A;c=a.isFunction(c)?c:function(){},g.verbose("Adding context push state",x),"overlay"!=p.animation&&g.remove.allVisible(),d.on(b,function(e){e.target==d[0]&&(d.off(b),g.remove.inward(),g.set.active(),g.bind.clickaway(),a.proxy(c,C)())}),g.set.visible(),g.set.animation(),g.set.direction(),setTimeout(function(){g.set.inward(),g.set.pushed()},100)},pullPage:function(c){var d="overlay"==p.animation?w:A;c=a.isFunction(c)?c:function(){},g.verbose("Removing context push state",g.get.direction()),g.unbind.clickaway(),d.on(b,function(e){e.target==d[0]&&(d.off(b),g.remove.animation(),g.remove.direction(),g.remove.outward(),g.remove.visible(),a.proxy(c,C)())}),g.set.outward(),g.remove.active(),g.remove.pushed()},add:{bodyCSS:function(a){var b;a!==r.bottom&&(b='<style title="'+s+'">body.pushed {}</style>'),h.append(b),g.debug("Adding body css to head",y)}},set:{active:function(){w.addClass(r.active)},direction:function(a){a=a||g.get.direction(),x.addClass(r[a])},visible:function(){w.addClass(r.visible)},animation:function(a){a=a||g.is.mobile()?p.mobileAnimation:p.animation,x.addClass(a)},inward:function(){x.addClass(r.inward)},outward:function(){x.addClass(r.outward)},pushed:function(){x.addClass(r.pushed)}},remove:{bodyCSS:function(){g.debug("Removing body css styles",y),g.refresh(),y.remove()},active:function(){w.removeClass(r.active)},visible:function(){w.removeClass(r.visible)},allVisible:function(){z.hasClass(r.visible)&&(g.debug("Other sidebars visible, hiding"),z.removeClass(r.visible))},animation:function(a){a=a||g.is.mobile()?p.mobileAnimation:p.animation,x.removeClass(a)},pushed:function(){x.removeClass(r.pushed)},inward:function(){x.removeClass(r.inward)},outward:function(){x.removeClass(r.outward)},direction:function(a){a=a||g.get.direction(),x.removeClass(r[a])}},get:{direction:function(){return w.hasClass(r.top)?r.top:w.hasClass(r.right)?r.right:w.hasClass(r.bottom)?r.bottom:r.left},transitionEvent:function(){var a,b=c.createElement("element"),e={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in e)if(b.style[a]!==d)return e[a]}},is:{mobile:function(){var a=navigator.userAgent,b=/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/,c=b.test(a);return c?(g.verbose("Browser was found to be mobile",a),!0):(g.verbose("Browser is not mobile, using regular animation",a),!1)},open:function(){return w.hasClass(r.active)},closed:function(){return!g.is.open()},visible:function(){return w.hasClass(r.visible)},vertical:function(){return w.hasClass(r.top)},inward:function(){return x.hasClass(r.inward)},outward:function(){return x.hasClass(r.outward)},animating:function(){return g.is.inward()||g.is.outward()}},setting:function(b,c){if(g.debug("Changing setting",b,c),a.isPlainObject(b))a.extend(!0,p,b);else{if(c===d)return p[b];p[b]=c}},internal:function(b,c){if(a.isPlainObject(b))a.extend(!0,g,b);else{if(c===d)return g[b];g[b]=c}},debug:function(){p.debug&&(p.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,p.name+":"),g.debug.apply(console,arguments)))},verbose:function(){p.verbose&&p.debug&&(p.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),g.verbose.apply(console,arguments)))},error:function(){g.error=Function.prototype.bind.call(console.error,console,p.name+":"),g.error.apply(console,arguments)},performance:{log:function(a){var b,c,d;p.performance&&(b=(new Date).getTime(),d=j||b,c=b-d,j=b,k.push({Element:C,Name:a[0],Arguments:[].slice.call(a,1)||"","Execution Time":c})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,100)},display:function(){var b=p.name+":",c=0;j=!1,clearTimeout(g.performance.timer),a.each(k,function(a,b){c+=b["Execution Time"]}),b+=" "+c+"ms",i&&(b+=" '"+i+"'"),(console.group!==d||console.table!==d)&&k.length>0&&(console.groupCollapsed(b),console.table?console.table(k):a.each(k,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd()),k=[]}},invoke:function(b,c,e){var h,i,j,k=D;return c=c||n,e=C||e,"string"==typeof b&&k!==d&&(b=b.split(/[\. ]/),h=b.length-1,a.each(b,function(c,e){var f=c!=h?e+b[c+1].charAt(0).toUpperCase()+b[c+1].slice(1):b;if(a.isPlainObject(k[f])&&c!=h)k=k[f];else{if(k[f]!==d)return i=k[f],!1;if(!a.isPlainObject(k[e])||c==h)return k[e]!==d?(i=k[e],!1):(g.error(t.method,b),!1);k=k[e]}})),a.isFunction(i)?j=i.apply(e,c):i!==d&&(j=i),a.isArray(f)?f.push(j):f!==d?f=[f,j]:j!==d&&(f=j),i}},m?(D===d&&g.initialize(),g.invoke(l)):(D!==d&&g.destroy(),g.initialize())}),f!==d?f:this},a.fn.sidebar.settings={name:"Sidebar",namespace:"sidebar",debug:!1,verbose:!1,performance:!1,animation:"scale down",mobileAnimation:"reveal",context:"body",useCSS:!0,duration:300,dimPage:!0,exclusive:!0,onChange:function(){},onShow:function(){},onHide:function(){},onHidden:function(){},onVisible:function(){},className:{pushable:"pushable",active:"active",visible:"visible",pushed:"pushed",inward:"show",outward:"hide"},selector:{sidebar:".ui.sidebar",pusher:".pusher",page:".page",omitted:"script, link, style, .ui.modal, .ui.nag"},error:{method:"The method you called is not defined.",notFound:"There were no elements that matched the specified selector"}}}(jQuery,window,document);